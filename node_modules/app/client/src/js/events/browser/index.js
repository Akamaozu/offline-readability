module.exports = function( noticeboard ){
  
  var PushState = require( "properjs-pushstate" ),
      history = new PushState();

  noticeboard.watch('next-page', 'browser:update-address-bar', function( msg ){
    
    noticeboard.once('new-view-rendered', 'browser:update-address-bar', function( msg ){

      var view_url = msg.notice.url;
          
      history.push( view_url );
    });
  });

  history.on('popstate', function( url ){

    noticeboard.notify('render-url', url, 'browser:history');
  });
}