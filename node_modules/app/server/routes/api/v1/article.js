var articles_api_routes = module.exports = require('express').Router();

articles_api_routes.use( require('app/server/middleware/require-valid-auth-header') );

articles_api_routes.get('/:id', function( req, res ){
  
  var readability = require('app/server/modules/readability');

  readability.article( req.auth.oauth_token, req.auth.oauth_token_secret, req.params.id, function( error, article ){

    if( error ) return res.status( 400 ).send( error.toString() );

    res.json( article );
  });
});